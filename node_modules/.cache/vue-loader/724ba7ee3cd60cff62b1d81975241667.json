{"remainingRequest":"/Users/yangang/Desktop/learn/antdesign/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yangang/Desktop/learn/antdesign/src/views/blog/detail/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yangang/Desktop/learn/antdesign/src/views/blog/detail/index.vue","mtime":1611826925117},{"path":"/Users/yangang/Desktop/learn/antdesign/node_modules/cache-loader/dist/cjs.js","mtime":1582881505343},{"path":"/Users/yangang/Desktop/learn/antdesign/node_modules/babel-loader/lib/index.js","mtime":1585799465353},{"path":"/Users/yangang/Desktop/learn/antdesign/node_modules/cache-loader/dist/cjs.js","mtime":1582881505343},{"path":"/Users/yangang/Desktop/learn/antdesign/node_modules/vue-loader/lib/index.js","mtime":1595387469879}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIEFwaSBmcm9tICJAL2FwaS9ibG9nIjsKCmltcG9ydCBNYXJrZG93bkVkaXRvciBmcm9tICJAL2NvbXBvbmVudHMvbWFya2Rvd24tZWRpdG9yIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNYXJrZG93bkVkaXRvcgogIH0sCiAgZGF0YSgpIHsKICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgcmV0dXJuIHsKICAgICAgaWQsCiAgICAgIGZvcm06IHt9CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaWQgJiYgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoRGF0YSgpIHsKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBBcGkuZGV0YWlsKHRoaXMuaWQpOwogICAgICB0aGlzLmZvcm0gPSBkYXRhOwogICAgfSwKICAgIG9uU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsKICAgICAgICBsZXQgZCA9IHsgLi4udGhpcy5mb3JtIH07CiAgICAgICAgdGhpcy5pZCA/IGF3YWl0IEFwaS51cGRhdGUoeyAuLi5kLCBpZDogdGhpcy5pZCB9KSA6IGF3YWl0IEFwaS5hZGQoZCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGAke3RoaXMuaWQgPyAi5L+u5pS5IiA6ICLmlrDlop4ifeaIkOWKn2ApOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYmxvZyIpOwogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/blog/detail","sourcesContent":["<template>\n  <a-card>\n    <a-form-model layout=\"horizontal\" :model=\"form\" ref=\"form\">\n      <a-form-model-item label=\"标题\" prop=\"title\">\n        <a-input placeholder=\"请输入标题\" v-model=\"form.title\"></a-input>\n      </a-form-model-item>\n      <a-form-model-item prop=\"content\">\n        <markdown-editor v-model=\"form.content\"></markdown-editor>\n      </a-form-model-item>\n      <a-form-model-item>\n        <div class=\"action-box\">\n          <a-button type=\"primary\" @click=\"onSubmit\">确认</a-button>\n          <a-button @click=\"$router.push('/blog')\">取消</a-button>\n        </div>\n      </a-form-model-item>\n    </a-form-model>\n  </a-card>\n</template>\n\n<script>\nimport * as Api from \"@/api/blog\";\n\nimport MarkdownEditor from \"@/components/markdown-editor\";\n\nexport default {\n  components: {\n    MarkdownEditor\n  },\n  data() {\n    const { id } = this.$route.query;\n    return {\n      id,\n      form: {}\n    };\n  },\n  mounted() {\n    this.id && this.fetchData();\n  },\n  methods: {\n    async fetchData() {\n      const { data } = await Api.detail(this.id);\n      this.form = data;\n    },\n    onSubmit() {\n      this.$refs.form.validate(async valid => {\n        if (!valid) return;\n        let d = { ...this.form };\n        this.id ? await Api.update({ ...d, id: this.id }) : await Api.add(d);\n        this.$message.success(`${this.id ? \"修改\" : \"新增\"}成功`);\n        this.$router.push(\"/blog\");\n      });\n    }\n  }\n};\n</script>\n\n<style>\n</style>"]}]}